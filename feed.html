<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghantaghar TV - GitHub Live Feed</title>
    <style>
        /* ‡§°‡§ø‡§ú‡§æ‡§á‡§® ‡§∏‡•á‡§ü‡§ø‡§ô‡•ç‡§∏ */
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background: #f4f7f6; margin: 0; padding: 20px; color: #333; }
        .wrapper { max-width: 850px; margin: auto; }
        
        .news-card { 
            background: #fff; 
            margin-bottom: 50px; 
            padding: 30px; 
            border-radius: 15px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); 
        }

        /* ‡§´‡§ø‡§ö‡§∞ ‡§á‡§Æ‡•á‡§ú ‡•≠‡•¶‡•¶ ‡§™‡§ø‡§ï‡•ç‡§∏‡•á‡§≤‡§Æ‡§æ ‡§∏‡•Ä‡§Æ‡§ø‡§§ */
        .feature-img { 
            width: 100%; 
            max-width: 700px; 
            height: auto; 
            display: block; 
            margin: 20px auto; 
            border-radius: 10px;
            object-fit: cover;
        }

        .title { font-size: 2.2rem; color: #b71c1c; text-decoration: none; font-weight: bold; line-height: 1.2; }
        .meta { font-size: 0.9rem; color: #777; margin: 15px 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        
        /* ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§®‡•ç‡§ü‡•á‡§®‡•ç‡§ü‡§ï‡•ã ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
        .entry-content { font-size: 1.2rem; line-height: 1.9; }
        .entry-content img { max-width: 100%; height: auto; border-radius: 8px; margin: 15px 0; }
        
        .loader { text-align: center; font-size: 1.5rem; padding: 100px; color: #b71c1c; }
    </style>
</head>
<body>

<div class="wrapper">
    <div id="news-feed">
        <div class="loader">‡§∏‡§∞‡•ç‡§≠‡§∞‡§¨‡§æ‡§ü ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§§‡§æ‡§®‡§ø‡§Å‡§¶‡•à‡§õ...</div>
    </div>
</div>

<script>
/**
 * Multi-function: 
 * ‡•ß. AllOrigins Proxy ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§∞‡•á‡§∞ ‡§´‡§ø‡§° ‡§§‡§æ‡§®‡•ç‡§®‡•á
 * ‡•®. Content:encoded ‡§¨‡§æ‡§ü ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§®‡§ø‡§ï‡§æ‡§≤‡•ç‡§®‡•á
 * ‡•©. ‡§á‡§Æ‡•á‡§ú‡§≤‡§æ‡§à ‡•≠‡•¶‡•¶ ‡§™‡§ø‡§ï‡•ç‡§∏‡•á‡§≤‡§Æ‡§æ ‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ó‡§∞‡•ç‡§®‡•á
 */
async function startGhantagharFeed() {
    const rss = "https://ghantaghartv.com/feed/";
    const proxy = "https://api.allorigins.win/get?url=" + encodeURIComponent(rss);

    try {
        const res = await fetch(proxy);
        const json = await res.json();
        
        const parser = new DOMParser();
        const doc = parser.parseFromString(json.contents, "text/xml");
        const posts = doc.querySelectorAll("item");

        const output = document.getElementById("news-feed");
        output.innerHTML = ""; 

        posts.forEach(item => {
            const title = item.querySelector("title").textContent;
            const link = item.querySelector("link").textContent;
            const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString('ne-NP');
            
            // ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§®‡•ç‡§ü‡•á‡§®‡•ç‡§ü ‡§®‡§ø‡§ï‡§æ‡§≤‡•ç‡§®‡•á
            const fullBody = item.getElementsByTagName("content:encoded")[0]?.textContent || item.querySelector("description").textContent;

            // ‡§´‡§ø‡§ö‡§∞ ‡§á‡§Æ‡•á‡§ú ‡§®‡§ø‡§ï‡§æ‡§≤‡•ç‡§®‡•á (‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§á‡§Æ‡•á‡§ú)
            let imageTag = "";
            const tempDiv = document.createElement("div");
            tempDiv.innerHTML = fullBody;
            const firstImg = tempDiv.querySelector("img");
            
            if (firstImg) {
                imageTag = `<img src="${firstImg.src}" class="feature-img" alt="News Image">`;
            }

            output.innerHTML += `
                <article class="news-card">
                    <a href="${link}" target="_blank" class="title">${title}</a>
                    <div class="meta">üìÖ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ø‡§§: ${pubDate}</div>
                    ${imageTag}
                    <div class="entry-content">
                        ${fullBody}
                    </div>
                </article>
            `;
        });

    } catch (e) {
        document.getElementById("news-feed").innerHTML = "<h3 style='text-align:center;'>‡§´‡§ø‡§° ‡§≤‡•ã‡§° ‡§≠‡§è‡§®‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∏ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§</h3>";
    }
}

startGhantagharFeed();
</script>

</body>
</html>
