<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Education Nepal - Professional Admin</title>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root { --primary: #e31e24; --sidebar-bg: #202124; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); display: flex; }
        
        /* Sidebar Design */
        .sidebar { width: 240px; height: 100vh; background: var(--sidebar-bg); color: white; position: fixed; }
        .sidebar-header { padding: 20px; font-weight: bold; font-size: 20px; border-bottom: 1px solid #3c4043; }
        .menu-item { padding: 15px 20px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; }
        .menu-item:hover, .menu-item.active { background: #3c4043; color: var(--primary); }
        
        /* Main Content */
        .main-content { margin-left: 240px; width: calc(100% - 240px); padding: 30px; }
        .card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.12); }
        .hidden { display: none; }
        
        /* Tables & UI */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #eee; }
        .del-btn { color: red; cursor: pointer; border: 1px solid red; padding: 5px 10px; border-radius: 4px; font-size: 12px; }
        #editor-container { height: 350px; margin: 20px 0; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; }
        .btn-pub { background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 4px; cursor: pointer; width: 100%; }
        
        #login-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:1000; display:flex; justify-content:center; align-items:center; flex-direction:column; }
    </style>
</head>
<body>

<div id="login-overlay">
    <h2>Education Nepal Admin</h2>
    <button onclick="handleAuth()" style="padding:15px 30px; background:#4285F4; color:white; border:none; border-radius:5px; cursor:pointer;">Google ‡§Æ‡§æ‡§∞‡•ç‡§´‡§§ ‡§≤‡§ó‡§á‡§® ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</button>
</div>

<div class="sidebar">
    <div class="sidebar-header">Blogger Admin</div>
    <div class="menu-item active" onclick="showTab('new-post')">‚ûï ‡§®‡§Ø‡§æ‡§Å ‡§™‡•ã‡§∑‡•ç‡§ü</div>
    <div class="menu-item" onclick="showTab('all-posts'); loadAllPosts();">üìÑ ‡§∏‡§¨‡•à ‡§™‡•ã‡§∑‡•ç‡§ü‡§π‡§∞‡•Ç</div>
    <div class="menu-item" onclick="showTab('stats'); loadStats();">üìä ‡§§‡§•‡•ç‡§Ø‡§æ‡§ô‡•ç‡§ï (Stats)</div>
    <div class="menu-item" onclick="showTab('settings')">‚öôÔ∏è ‡§∏‡•á‡§ü‡§ø‡§ô</div>
</div>

<div class="main-content">
    
    <div id="new-post" class="tab-content card">
        <h3>‡§®‡§Ø‡§æ‡§Å ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§≤‡•á‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</h3>
        <input type="text" id="post-title" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï...">
        <input type="text" id="post-labels" placeholder="Labels (‡§ï‡§Æ‡§æ‡§≤‡•á ‡§õ‡•Å‡§ü‡•ç‡§Ø‡§æ‡§â‡§®‡•Å‡§π‡•ã‡§∏‡•ç)...">
        <div id="editor-container"></div>
        <button class="btn-pub" onclick="createPost()">‡§™‡§¨‡•ç‡§≤‡§ø‡§∂ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</button>
    </div>

    <div id="all-posts" class="tab-content card hidden">
        <h3>‡§∏‡§¨‡•à ‡§™‡•ã‡§∑‡•ç‡§ü‡§π‡§∞‡•Ç</h3>
        <table id="posts-table">
            <thead><tr><th>‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï</th><th>‡§Æ‡§ø‡§§‡§ø</th><th>‡§ï‡§æ‡§∞‡•ç‡§Ø</th></tr></thead>
            <tbody id="posts-list"></tbody>
        </table>
    </div>

    <div id="stats" class="tab-content card hidden">
        <h3>‡§¨‡•ç‡§≤‡§ó ‡§§‡§•‡•ç‡§Ø‡§æ‡§ô‡•ç‡§ï</h3>
        <div id="stats-data">‡§≤‡•ã‡§° ‡§π‡•Å‡§Å‡§¶‡•à‡§õ...</div>
    </div>

</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
    const CLIENT_ID = '749823606982-3o2tcrn6ne9ncni49l4nfskg5am25i60.apps.googleusercontent.com';
    const BLOG_ID = '4810240129416724295';
    let access_token = null;

    var quill = new Quill('#editor-container', {
        theme: 'snow',
        modules: { toolbar: [[{'header': [1,2,false]}], ['bold', 'italic', 'underline'], ['image', 'code-block']] }
    });

    function showTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
        document.getElementById(tabId).classList.remove('hidden');
        document.querySelectorAll('.menu-item').forEach(m => m.classList
